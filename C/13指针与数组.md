 # 指针与数组

 * 指针与一维数组
 * 指针与二维数组

## 指针与一维数组

在数组中，数组名就是数组的起始地址，也就是第一个元素的地址。所以数组名就是个**常量指针**。

```c
int a[] = {1, 2, 3, 4, 5};
int* p = a;
```

> 上面的的代码中 a 与 p 的区别是，a是一个常量指针，它的值不能改变，而 p 是可以改变的。


`a+1`, `&a[1]`, `p+1`, `&p[1]` 都表示同一个地址

`*(a+1)`, `*&a[1]`, `*(p+1)`, `*&p[1]` 都表示a[1]

**要点：**
* `&a` 表示数组指针，即**指向数组的指针**
* `int (*p2)[5]`为数组指针，也就是 `p2` 是一个指针，它指向一个具有5个元素的 `int` 类型的数组
    ```c
    int a[] = {1, 2, 3, 4, 5};
    int (*p)[5] = a;
    ```
* `int* p3[5]` 为指针数组，也就是 `p3` 是一个拥有5个元素的数组，其中元素的类型是 `int*`
    ```c
    #include <stdio.h>

    int main(void)
    {
        int a = 10;
        int b = 20;
        int *ap = &a;
        int *bp = &b;
        int* p[2] = {&a, &b};
        int* q[2] = {ap, bp};
        printf("&a = %p, &a = %p\n", p[0], q[0]);
        printf("&b = %p, &b = %p\n", p[1], q[1]);
    }
    ```

## 指针与二维数组
* 二维数组可以看成一个矩阵列
* 二维数组也可以看成一个一维数组，其中每个元素又是一个包含若干个元素的一维数组，如 `int a[3][4]`
    * 二维数组 a 可以看成具有三个元素 `a[0]`、`a[1]`、`a[2]`，每个元素又是一个包含4个元素的一维数组。那么 `a[0]`、`a[1]`、`a[2]` 可以看成是一维数组的数组名，即 `a[0]` 是第0行元素的首地址，`a[1]` 是第1行元素的首地址，等等。
    * `a[i]` 和 `*(a+i)` 等价，都是第i行第0列元素的地址，那么 `a[i]+j`、`*(a+i)+j`、`&a[0][0]+4*i+j` 都是第i行第j列元素的地址。

### 二维数组的指针表示
```c
int a[3][4];
int (*p)[4];
p = a;
```
这里面的 a 或 p 的类型是 `int (*)[4]`

对二维数组的引用有三中方式：

* 下标法：如 `a[i][j]` 或 `p[i][j]`
* 指针法：如 `*(*(p+i)+j)` 或 `*(*(a+i)+j)`
* 下标指针混合法，如 `*(a[i]+j)`、`*(p[i]+j)`、`(*(a+i))[j]`、`(*(p+i))[j]`、`*(&a[0][0]+i*4+j)` 等
